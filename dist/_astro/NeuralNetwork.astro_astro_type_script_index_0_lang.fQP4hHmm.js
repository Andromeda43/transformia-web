document.addEventListener("DOMContentLoaded",()=>{const C=document.querySelector(".neural-network-visualization"),M=document.querySelector(".connections-container"),i=document.querySelectorAll(".layer");document.querySelectorAll(".node");function q(){if(!C||!M)return;const t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("width","100%"),n.setAttribute("height","100%");const c=document.createElementNS(t,"defs"),e=document.createElementNS(t,"linearGradient");e.setAttribute("id","connection-gradient-input"),e.setAttribute("x1","0%"),e.setAttribute("y1","0%"),e.setAttribute("x2","100%"),e.setAttribute("y2","0%");const r=document.createElementNS(t,"stop");r.setAttribute("offset","0%"),r.setAttribute("stop-color","rgba(100, 200, 255, 0.6)");const a=document.createElementNS(t,"stop");a.setAttribute("offset","100%"),a.setAttribute("stop-color","rgba(176, 66, 255, 0.6)"),e.appendChild(r),e.appendChild(a);const o=document.createElementNS(t,"linearGradient");o.setAttribute("id","connection-gradient-hidden"),o.setAttribute("x1","0%"),o.setAttribute("y1","0%"),o.setAttribute("x2","100%"),o.setAttribute("y2","0%");const u=document.createElementNS(t,"stop");u.setAttribute("offset","0%"),u.setAttribute("stop-color","rgba(176, 66, 255, 0.6)");const l=document.createElementNS(t,"stop");l.setAttribute("offset","100%"),l.setAttribute("stop-color","rgba(176, 66, 255, 0.6)"),o.appendChild(u),o.appendChild(l);const s=document.createElementNS(t,"linearGradient");s.setAttribute("id","connection-gradient-output"),s.setAttribute("x1","0%"),s.setAttribute("y1","0%"),s.setAttribute("x2","100%"),s.setAttribute("y2","0%");const y=document.createElementNS(t,"stop");y.setAttribute("offset","0%"),y.setAttribute("stop-color","rgba(176, 66, 255, 0.6)");const S=document.createElementNS(t,"stop");S.setAttribute("offset","100%"),S.setAttribute("stop-color","rgba(255, 100, 200, 0.6)"),s.appendChild(y),s.appendChild(S),c.appendChild(e),c.appendChild(o),c.appendChild(s),n.appendChild(c);for(let p=0;p<i.length-1;p++){const R=i[p],k=i[p+1],O=R.querySelectorAll(".node"),E=k.querySelectorAll(".node");let f;p===0?f="connection-gradient-input":p===i.length-2?f="connection-gradient-output":f="connection-gradient-hidden",O.forEach(B=>{const A=B.getBoundingClientRect(),b=C.getBoundingClientRect(),v=A.left-b.left+A.width/2,I=A.top-b.top+A.height/2,G=Math.min(E.length,4);[...E].sort(()=>.5-Math.random()).slice(0,G).forEach(H=>{const g=H.getBoundingClientRect(),L=g.left-b.left+g.width/2,$=g.top-b.top+g.height/2,d=document.createElementNS(t,"line");if(d.setAttribute("x1",v.toString()),d.setAttribute("y1",I.toString()),d.setAttribute("x2",L.toString()),d.setAttribute("y2",$.toString()),d.setAttribute("stroke",`url(#${f})`),d.setAttribute("stroke-width","1"),d.setAttribute("stroke-opacity",(Math.random()*.3+.2).toString()),n.appendChild(d),Math.random()>.7){const m=document.createElementNS(t,"circle");m.setAttribute("r","3"),m.setAttribute("fill","#ffffff"),m.setAttribute("opacity","0.7");const h=document.createElementNS(t,"animateMotion");h.setAttribute("path",`M${v},${I} L${L},${$}`),h.setAttribute("dur",Math.random()*2+1+"s"),h.setAttribute("repeatCount","indefinite"),h.setAttribute("begin",Math.random()*3+"s"),m.appendChild(h),n.appendChild(m)}})})}M.appendChild(n)}function w(){const t=Math.floor(Math.random()*(i.length-1)),c=i[t].querySelectorAll(".node"),e=Math.floor(Math.random()*c.length),r=c[e];x(r),setTimeout(()=>{N(t+1,e)},100)}function x(t){t.classList.add("active"),setTimeout(()=>{t.classList.remove("active")},500)}function N(t,n){if(t>=i.length)return;const e=i[t].querySelectorAll(".node"),r=Math.floor(Math.random()*3)+1;for(let a=0;a<r;a++){let o;if(Math.random()>.7){const l=Math.floor(Math.random()*3)-1;o=Math.max(0,Math.min(e.length-1,n+l))}else o=Math.floor(Math.random()*e.length);const u=e[o];setTimeout(()=>{x(u),t<i.length-1&&setTimeout(()=>{N(t+1,o)},100)},50*a)}}function T(){const t=document.querySelector(".status-value.accuracy"),n=document.querySelector(".status-value.epoch");if(t&&n){setInterval(()=>{const o=t.textContent||"96.8%",u=parseFloat(o),l=(Math.random()-.5)*.4,s=Math.max(95.5,Math.min(98.5,u+l));t.textContent=s.toFixed(1)+"%"},5e3);const c=n.textContent||"83/100";let e=parseInt(c.split("/")[0]);const r=parseInt(c.split("/")[1]||"100"),a=setInterval(()=>{e++,n&&(n.textContent=`${e}/${r}`),e>=r&&(clearInterval(a),setTimeout(()=>{e=0,n&&(n.textContent=`${e}/${r}`),setInterval(()=>{e=Math.min(r,e+1),n&&(n.textContent=`${e}/${r}`)},8e3)},1e4))},8e3)}}setTimeout(()=>{q(),setInterval(w,2e3),T()},1e3)});
